// ZFLV.h: interface for the ZFLV class.
//
//////////////////////////////////////////////////////////////////////

#if !defined(AFX_ZFLV_H__8B156459_85F1_44E7_A594_0C6CFDA065A8__INCLUDED_)
#define AFX_ZFLV_H__8B156459_85F1_44E7_A594_0C6CFDA065A8__INCLUDED_

#if _MSC_VER > 1000
#pragma once
#endif // _MSC_VER > 1000

#include <stdio.h>
#include <windows.h>
//#include "GnElecPackageMP4.h"
//class CGnElecPackageMP4;
#include "ZFile.h"
class ZFLV  
{
//	FILE*fp;
	long lasttime;
	CRITICAL_SECTION g_cs;

	ZFile m_fp;
	
//	CGnElecPackageMP4 m_mp4;
//	int m_wight;
//	int m_hight;
//	int m_videtrackid;
//	int m_audiotrackid;
//	unsigned char*tempbuff;


public:
	//开始
	void Start();
	/*
	是否第一次获取数据
	*/
	bool firsttime;
	/*
	初始化AAC信息
	BYTE*data,数据内容
	int len,数据长度
	long timestemp,时间戳
	*/
	void InitAAC(BYTE*data,int len,long timestemp);
	/*
	获取AAC数据
	BYTE*data,数据内容
	int len,数据长度
	long timestemp,时间戳
	*/
	void GetAACData(BYTE*data,int len,long timestemp);
	/*
	获取H264数据
	BYTE*data,数据内容
	int len,数据长度
	bool key,是否关键帧
	long timestemp,时间戳
	*/
	void GetH264Data(BYTE*data,int len,bool key,long timestemp);
	/*
	初始化H264信息
	BYTE*sps,sps数据
	int spslen,sps长度
	BYTE* pps,pps数据
	int ppslen,pps长度
	long timestemp,时间戳
	*/
	void InitH264(BYTE*sps,int spslen,BYTE* pps,int ppslen,long timestemp);
	/*
	初始化，
	bool video,是否有视频
	bool audio,是否有音频
	*/
	void Init(bool video,bool audio);
	//保存
	void Save();
	ZFLV();
	virtual ~ZFLV();

};

#endif // !defined(AFX_ZFLV_H__8B156459_85F1_44E7_A594_0C6CFDA065A8__INCLUDED_)
